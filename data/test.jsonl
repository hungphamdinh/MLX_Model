{"text":"File: AddOrEditAsset/DetailTab.js, Q: What does the defaultValues object initialize in DetailTab? A: It sets initial values for many fields including assetName, assetCode, assetType (null), purchasedDate (null), price (object with text and rawValue), serialNumber, warrantDate, description, companyCode, companyName, companyAddress, companyPhone, code, unitLocation, inventoryBrand (null), locationType ([1] by default), a reminder object (with emails array, isActive flag, users array and reminderDay), files (empty array), assetCreationTime and model."}
{"text":"File: AddOrEditAsset/DetailTab.js, Q: Which fields are marked as required in the Yup validation schema? A: The schema created with Yup requires that assetName and description are non-empty strings and that assetType is an object (nullable) but must not be null."}
{"text":"File: AddOrEditAsset/DetailTab.js, Q: How is the isIMT boolean computed and what does it represent? A: It is set to true when the form is not in add mode (!isAddNew) and assetDetail.referenceId has a length greater than zero; this indicates the asset is imported and certain fields such as assetType should be disabled."}
{"text":"File: AddOrEditAsset/DetailTab.js, Q: What value is assigned to the price field by default? A: The constant defaultCost defines price as { text: ‘0’, rawValue: 0 }, representing zero cost both in display and numeric form."}
{"text":"File: AddOrEditAsset/DetailTab.js, Q: How are asset types loaded into the form? A: useAsset().getAssetTypes is called in a useEffect on mount with { page:1, keyword:’’ }, and the FormLazyDropdown for assetType calls getAssetTypes with page and keyword whenever the user scrolls or searches."}
{"text":"File: AddOrEditAsset/DetailTab.js, Q: How are employees retrieved for the reminder dropdown? A: The parent screen calls getEmployees() via useUser, and the FormLazyDropdown in the reminder section passes getEmployees as its getList callback to load more employees when the user scrolls or searches."}
{"text":"File: AddOrEditAsset/DetailTab.js, Q: What role does the useFile hook play in DetailTab? A: It provides getFileReference to retrieve document URLs when editing, resetFiles to clear uploads on unmount, and fileUrls which are watched so that when new files are uploaded they are assigned to the form’s files field."}
{"text":"File: AddOrEditAsset/DetailTab.js, Q: How does getInitialValueForUpdate construct initial form values for editing? A: It copies data from assetDetail, converts purchasedDate and warrantDate using parseDate, sets price as an object with formatted text and raw value, extracts company details into companyCode, companyName, companyAddress and companyPhone, sets company to an object containing companyId and a representative name, converts reminder.reminderInMinutes to reminderDay using minutesToDays, and wraps locationType in an array."}
{"text":"File: AddOrEditAsset/DetailTab.js, Q: What parameters are passed to the API when submitting the form? A: In onSubmit, the component builds params by spreading form values and overriding fields: locationId and unitId extracted from location and unit, locationType as the first entry of the locationType array, price as price.rawValue, companyId, assetTypeId, inventoryBrandId, and a reminder object with userIds extracted from reminder.users and reminderInMinute computed via daysToMinutes(reminder.reminderDay)."}
{"text":"File: AddOrEditAsset/DetailTab.js, Q: How does addEmailAndResetInput update the reminder emails? A: It pushes the current userEmail onto the reminder.emails array using setValue, and then clears the userEmail field in the form."}
{"text":"File: AddOrEditAsset/DetailTab.js, Q: What does the removeEmail function do? A: It removes an email from reminder.emails by filtering out the entry at the given index and updating the form field with the new array."}
{"text":"File: AddOrEditAsset/DetailTab.js, Q: How does onCheckEmail validate and add an email? A: It reads the userEmail field using watch(‘userEmail’), validates it using validateEmail; if invalid, it shows a modal error; otherwise it calls addEmailAndResetInput to append the email to the list."}
{"text":"File: AddOrEditAsset/DetailTab.js, Q: What options are provided for locationTypes and how are they used? A: locationTypes is an array with two objects: one for unit location (value:1) and one for common location (value:0), each labelled with I18n translation keys; it is passed to FormRadioGroup to allow users to choose the type of location."}
{"text":"File: AddOrEditAsset/DetailTab.js, Q: How does getDefaultEmployees build the display title for the employee dropdown? A: If assetDetail.reminder.users exists, it maps each user’s displayName and joins them with commas to create a single string; otherwise it returns an empty string."}
{"text":"File: AddOrEditAsset/DetailTab.js, Q: Which useEffect fetches asset types on mount? A: An effect with an empty dependency array invokes getAssetTypes with { page:1, keyword:’’ } to load the list of asset types when the component first renders."}
{"text":"File: AddOrEditAsset/DetailTab.js, Q: How does the component handle updates to uploaded files? A: A useEffect watches fileUrls.length; if fileUrls are present, it calls setValue(‘files’, fileUrls) to update the form; the cleanup function invokes resetFiles to clear them on unmount."}
{"text":"File: AddOrEditAsset/DetailTab.js, Q: When does the form reset to updated values? A: Another useEffect listens to assetDetail; whenever it changes and is defined, it calls formMethods.reset(getInitialValueForUpdate()) to populate the form with the latest asset data."}
{"text":"File: AddOrEditAsset/DetailTab.js, Q: What utility functions handle date conversions for reminders? A: minutesToDays converts reminder.reminderInMinutes to reminderDay when loading existing values, and daysToMinutes converts reminderDay back to minutes before submitting the form."}
{"text":"File: AddOrEditAsset/DetailTab.js, Q: How is the price represented in the form and converted for submission? A: In the form, price is an object with text displaying the formatted amount and rawValue holding the numeric value; on submit, only price.rawValue is included in the API params."}
{"text":"File: AddOrEditAsset/DetailTab.js, Q: What company fields become read-only inputs after selection? A: Once a company is selected via FormSuggestionPicker, fields for companyCode, companyAddress and companyPhone are populated and displayed in FormInput components with editable=false."}
{"text":"File: AddOrEditAsset/DetailTab.js, Q: Which additional fields are shown only when editing an asset? A: When !isAddNew, the component displays a TextBox showing the asset’s active/inactive status and a read-only FormInput for the asset code under the info section."}
{"text":"File: AddOrEditAsset/DetailTab.js, Q: What controls whether the reminder inputs are visible? A: A FormSwitch bound to reminder.isActive toggles the visibility of the reminder fields—employee list, reminder day input, email input and existing emails list appear only when the switch is on."}
{"text":"File: AddOrEditAsset/DetailTab.js, Q: How does the form change when qrFeedbackSetting.isEmbedExternalWebsite is true? A: Instead of rendering the full asset form, it shows a simplified view with inputs for assetName, assetCode, a date field for creation time, a radio group for location type and suggestion pickers for unit or location, plus a status text box; other details like brand or reminder are omitted."}
{"text":"File: AddOrEditAsset/DetailTab.js, Q: Under what condition is the save button rendered? A: The button appears only if readOnly is false; it calls formMethods.handleSubmit(onSubmit) when pressed and uses I18n.t(‘AD_COMMON_SAVE’) for its title."}
{"text":"File: AddOrEditAsset/DetailTab.js, Q: How does the component decide whether to show a unit or location selector? A: It checks the first element of the locationType array: if equal to AssetLocationType.Unit, it displays a suggestion picker for units; if equal to AssetLocationType.Location, it displays one for locations."}
{"text":"File: AddOrEditAsset/DetailTab.js, Q: What is the purpose of FormDisabledProvider in DetailTab? A: It wraps all form inputs and disables them when the disabled prop is true (based on readOnly), preventing user interaction with fields when the form should be read-only."}
{"text":"File: AddOrEditAsset/DetailTab.js, Q: How does the reminder section allow removing an email? A: Each email in reminder.emails is rendered with  and passes onPressRemove which calls removeEmail(index) to filter it out of the list."}
{"text":"File: AddOrEditAsset/DetailTab.js, Q: How are date fields such as purchasedDate, warrantDate and assetCreationTime represented? A: They use FormDate components with mode=\"date\"; purchased and warrant dates are editable unless isIMT disables them, while assetCreationTime is displayed via FormDate with disabled and shows either assetType.creationTime or assetDetail.creationTime."}
{"text":"File: AddOrEditAsset/DetailTab.js, Q: What happens after a successful submission? A: onSubmit awaits the submitRequest (either addAsset or editAsset); if a response is returned, it navigates back via NavigationService.goBack() and emits ‘ReloadAsset’ using DeviceEventEmitter to refresh asset lists."}
{"text":"File: AddOrEditAsset.js, Q: How does the component determine whether it is adding a new asset or editing an existing one? A: It inspects navigation.state.routeName; if this route name is not ‘detailAssets’, isAddNew is set to true, indicating the screen is for creating a new asset."}
{"text":"File: AddOrEditAsset.js, Q: What data is provided by the useAsset hook? A: useAsset returns an object with asset state containing assetDetail, and two actions: getAssetDetail to fetch an asset’s details by ID and resetAssetDetail to clear the current asset from state."}
{"text":"File: AddOrEditAsset.js, Q: Why does the component call getEmployees from useUser? A: It fetches the list of employees at mount so that the reminder section in the detail tab can present available users when adding or editing an asset."}
{"text":"File: AddOrEditAsset.js, Q: What purpose does the tabIndex state serve? A: It tracks which tab is currently selected in the segment control, determining whether to display the Detail tab, job request history, preventive maintenance history, maintenance plan list or inspection history."}
{"text":"File: AddOrEditAsset.js, Q: How is the array of tab labels defined and what do they represent? A: tabs is an array of translation keys: [‘AD_ASSETS_TAB_DETAIL’,‘PM_HISTORY’,‘JR_HISTORY’,‘AD_ASSETS_TAB_LIST’,‘INSPECTION_HISTORY’]; each corresponds to the asset details view, preventive maintenance history, job request history, maintenance plan list and inspection history respectively."}
{"text":"File: AddOrEditAsset.js, Q: What does otherModule represent and how is it determined? A: It refers to assetDetail?.moduleId; if the asset originates from a different module (e.g. Work Order or Plan Maintenance), this value is used to restrict editing and adjust the available tabs."}
{"text":"File: AddOrEditAsset.js, Q: How does the tabValues function decide which tabs to show? A: If isAddNew is true, it returns only [‘AD_ASSETS_TAB_DETAIL’]; if the asset’s module is Modules.WORKORDER, it returns [‘JR_HISTORY’,‘AD_ASSETS_TAB_DETAIL’]; if the module is Modules.PLANMAINTENANCE, it returns [‘AD_ASSETS_TAB_LIST’,‘AD_ASSETS_TAB_DETAIL’]; otherwise it returns all tabs except ‘AD_ASSETS_TAB_LIST’."}
{"text":"File: AddOrEditAsset.js, Q: What component does getListFromOther return for Work Order versus Plan Maintenance modules? A: When otherModule equals Modules.WORKORDER, it returns ; otherwise it returns ."}
{"text":"File: AddOrEditAsset.js, Q: How does getListFromAsset choose which list to render? A: It looks at tabIndex: if tabIndex is 2 it returns ; if 3 it returns ; otherwise it returns ."}
{"text":"File: AddOrEditAsset.js, Q: What happens when the user switches tabs? A: The SegmentControl calls onTabChange, which updates the tabIndex state; this in turn causes the screen to render the appropriate component for that tab."}
{"text":"File: AddOrEditAsset.js, Q: How does the getSegments function structure the tab view? A: It wraps a SegmentControl inside a styled SegmentWrapper and then renders the provided child component below; the segment control scrolls horizontally and displays the tab labels from tabValues()."}
{"text":"File: AddOrEditAsset.js, Q: What logic does showTab use to decide what to render? A: If isAddNew is true, it returns a ; if editing and tabIndex is 0 it returns ; if otherModule is defined and tabIndex > 0 it returns the result of getListFromOther(); otherwise it returns the component from getListFromAsset(); this result is wrapped with getSegments to include the tab bar."}
{"text":"File: AddOrEditAsset.js, Q: How is the screen’s header title determined? A: It passes title={isAddNew ? ‘ADD_ASSET’ : ‘AD_AS_DETAIL_ASSET_TITLE’} to BaseLayout, so the header displays ADD_ASSET for creation mode and AD_AS_DETAIL_ASSET_TITLE for edit mode."}
{"text":"File: AddOrEditAsset.js, Q: When does the component fetch asset details? A: A useEffect watches [id]; on mount or when the id parameter changes it calls getEmployees() and, if id is defined, getAssetDetail(id) to load the asset’s data; it returns a cleanup function that calls resetAssetDetail()."}
{"text":"File: AddOrEditAsset.js, Q: Why does the component call resetAssetDetail on unmount? A: To clear out the asset details from context, preventing stale data from persisting when navigating away from the add/edit screen."}
{"text":"File: AddOrEditAsset.js, Q: How is the readOnly prop for DetailTab calculated? A: When editing, readOnly is set to !!otherModule; if otherModule is truthy (meaning the asset belongs to another module like Work Order or Plan Maintenance), fields in DetailTab are disabled and no save button is shown."}
{"text":"File: AddOrEditAsset.js, Q: What are the Modules constants used for? A: Modules enumerates values such as WORKORDER and PLANMAINTENANCE; they are compared to assetDetail.moduleId to determine which tabs should be available and which lists should be rendered."}
{"text":"File: AddOrEditAsset.js, Q: How does dynamicScrolling in SegmentControl affect the UI? A: It allows the tab bar to scroll horizontally when there are more tabs than fit in the available width, ensuring all tabs are accessible without wrapping."}
{"text":"File: AddOrEditAsset.js, Q: What is different about the UI when adding a new asset compared to editing? A: When adding, only the DetailTab is shown (no tabs bar) and all fields are editable; when editing, a tab bar appears allowing the user to navigate between details, maintenance history, job request history, maintenance plans or inspection history depending on the asset’s module."}
{"text":"File: AddOrEditAsset.js, Q: In what situation does the job request history appear in the tab bar? A: If the asset belongs to the Work Order module (otherModule === Modules.WORKORDER) the tab bar includes JR_HISTORY; also, when editing an asset not tied to a specific module and tabIndex is 2, getListFromAsset() returns JobRequestHistory."}
{"text":"File: AddOrEditAsset.js, Q: What styling does the Wrapper component provide? A: It is a styled View with flex: 1, ensuring its child components expand to fill available space within the screen."}
{"text":"File: AddOrEditAsset.js, Q: Why does SegmentWrapper have a negative top margin? A: The styled component sets margin-top: -20px to pull the segment control up and align it with content in the header area for a cohesive design."}
{"text":"File: AddOrEditAsset.js, Q: How does the screen adjust available tabs for Plan Maintenance assets? A: When otherModule === Modules.PLANMAINTENANCE, tabValues returns only the list tab (AD_ASSETS_TAB_LIST) and the detail tab, excluding the job request history or inspection history tabs."}
{"text":"File: AddOrEditAsset.js, Q: What happens when tabIndex is set to 3? A: When editing an asset not bound to a specific module, tabIndex 3 triggers getListFromAsset() to return , displaying the asset’s inspection history."}
{"text":"File: AddOrEditAsset.js, Q: How does the screen decide whether to wrap the rendered tab contents with getSegments? A: If creating a new asset (isAddNew), it returns the detail tab directly without wrapping; when editing (!isAddNew), it always calls getSegments with the chosen tab content so the segment control and content are displayed together."}
{"text":"File: AddOrEditAsset.js, Q: How are navigation props propagated to child components? A: The navigation object from props is passed down to DetailTab, MaintenancePlan, JobRequestHistory, and InspectionHistory, so that those components can perform navigation actions relative to the current screen context."}
{"text":"File: AddOrEditAsset.js, Q: What happens when the user switches tabs? A: The SegmentControl calls onTabChange, which updates the tabIndex state; this in turn causes the screen to render the appropriate component for that tab."}
{"text":"File: AddAttendance.js, Q: What default values are initialized in the attendance form? A: The form’s default values include date set to new Date(), a temperature object with empty text and rawValue 0, checkingType set to 0 (check-in), and an empty description."}
{"text":"File: AddAttendance.js, Q: Which methods are returned by useCompatibleForm and used in AddAttendance? A: It provides setFieldValue, setFieldError, and watch, allowing the component to update form fields, report validation errors, and observe field values such as checkingType."}
{"text":"File: AddAttendance.js, Q: How is the current checking type tracked in AddAttendance? A: The component calls watch(‘checkingType’) from the form context to monitor whether the user is checking in (0) or checking out (1) and stores this value in the checkingType constant."}
{"text":"File: AddAttendance.js, Q: What actions does the first useEffect perform on mount? A: It calls getCurrentLocation() to fetch the tenant location, requests location permission via requestLocationPermission(requestLocation) if the map isn’t already loading, resets isLoadingMap to false, and sets up a cleanup to clear the geolocation watch."}
{"text":"File: AddAttendance.js, Q: How does AddAttendance set the default checking type based on the last activity? A: In a separate useEffect watching currentLocation and isLoadingMap, if currentLocation.lastActivity.state equals 0 (already checked in), it calls setFieldValue(‘checkingType’, 1) to preselect the check-out option."}
{"text":"File: AddAttendance.js, Q: What does onReceiveLocation do with position data? A: It builds a new region for the map using the current latitude and longitude, and computes the distance to the tenant’s geography using the Haversine formula via distanceBetween2Points, updating region and distance state."}
{"text":"File: AddAttendance.js, Q: How does requestLocation obtain the user’s location? A: It defines platform-specific parameters for accuracy, timeout and cache duration, then calls Geolocation.getCurrentPosition and Geolocation.watchPosition with success and error callbacks and stores the watch ID in watchId.current."}
{"text":"File: AddAttendance.js, Q: What temperature validation occurs before submitting attendance? A: onSubmit checks if the entered temperature (temperature.rawValue) is greater than zero but outside the range 34–42; if so, it uses setFieldError to display a validation message keyed by ‘ATTENDANCE_TEMPERATURE_REQUIRED’ and aborts submission."}
{"text":"File: AddAttendance.js, Q: What data is sent to the API on check-in or check-out? A: The component constructs params including attendanceDateTime (current timestamp via moment().format()), latitude and longitude from the map region, the numeric temperature, a boolean isWell indicating if temperature is ≤37.5°C, and the description from the form."}
{"text":"File: AddAttendance.js, Q: How does AddAttendance choose which attendance function to call? A: It checks whether formData.checkingType equals 0; if so it calls checkInLocation, otherwise it calls checkOutLocation, assigning the chosen function to submitRequest."}
{"text":"File: AddAttendance.js, Q: What occurs after a successful attendance submission? A: The screen navigates back via NavigationService.goBack(), emits an AddOrEditAttendanceSuccess event, constructs a success message using translated strings, the tenant name and the local attendance time, and displays it with noticeUtils.showSuccess()."}
{"text":"File: AddAttendance.js, Q: How is the distance between two points calculated? A: The helper distanceBetween2Points implements the Haversine formula to compute the great-circle distance between two latitude/longitude pairs and returns the result in kilometres."}
{"text":"File: AddAttendance.js, Q: How is the temperature number input configured? A: The temperatureOptions object sets precision to 1 decimal place and uses LocaleConfig.groupSeparator and LocaleConfig.decimalSeparator for formatting; these options are passed to FormNumberInput."}
{"text":"File: AddAttendance.js, Q: When does the submit button become disabled? A: The button’s disabled prop is set to flatCheck, which is true when the computed distance (in metres) exceeds the allowed distanceArea defined in the attendance context."}
{"text":"File: AddAttendance.js, Q: What is the purpose of lastTimeCheckIn and how is it displayed? A: It stores the tenant’s previous localAttendanceDateTime; if the user is checking out (checkingType is 1) and lastTimeCheckIn exists, a hint message shows the last checkout time formatted as HH:mm:ss."}
{"text":"File: AddAttendance.js, Q: Which form fields and inputs are rendered in the attendance form? A: A disabled date picker (FormDate), a segment control (FormSegment) to choose check-in or check-out, a numeric temperature input (FormNumberInput), a multiline description input (FormInput), and an AttendanceMap showing the user’s location."}
{"text":"File: AddAttendance.js, Q: What translation keys label the segment control options? A: The array checkingTypeOptions includes two keys: ‘ATTENDANCE_CHECK_IN’ for check-in and ‘CHECKOUT_TEXT’ for check-out."}
{"text":"File: AddAttendance.js, Q: What does the baseLayoutProps object configure for the page layout? A: It sets the title to ‘ATTENDANCE_CHECK_IN’, disables the bell icon (showBell:false), and adds horizontal padding to the container via containerStyle."}
{"text":"File: AddAttendance.js, Q: How does the component avoid leaking location watchers? A: The cleanup function returned by the first useEffect calls Geolocation.clearWatch(watchId.current), ensuring that continuous location tracking is stopped when the component unmounts."}
{"text":"File: AddAttendance.js, Q: Why is requestLocationPermission called with requestLocation? A: It requests the necessary permissions for accessing location data, and if granted, it executes requestLocation to start obtaining the user’s position via the Geolocation API."}